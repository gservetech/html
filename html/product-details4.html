<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - Glass Design</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #f0f0f0;
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Main Container */
        .product-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Background Product Image */
        .background-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: blur(8px) brightness(0.3);
            transform: scale(1.1);
            z-index: 1;
        }

        /* Glass Overlay */
        .glass-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            z-index: 2;
        }

        /* Main Product Display */
        .product-display {
            position: relative;
            z-index: 3;
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 60px;
            max-width: 1200px;
            width: 100%;
            padding: 0 40px;
            align-items: center;
        }

        /* Product Image Section */
        .product-image-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .main-product-image {
            width: 100%;
            max-width: 500px;
            height: auto;
            object-fit: contain;
            filter: drop-shadow(0 20px 40px rgba(0, 0, 0, 0.3));
            transition: transform 0.4s ease;
        }

        .main-product-image:hover {
            transform: scale(1.05);
        }

        /* Color Thumbnail Navigation */
        .color-thumbnails {
            display: flex;
            gap: 12px;
            margin-top: 30px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 50px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .color-thumb {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            object-fit: cover;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .color-thumb.active {
            border-color: rgba(255, 255, 255, 0.8);
            transform: scale(1.2);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .color-thumb:hover:not(.active) {
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.4);
        }

        /* Glass Details Panel */
        .details-panel {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .details-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
        }

        .product-category {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .product-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 15px;
            color: white;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .product-price {
            font-size: 28px;
            font-weight: 800;
            color: #00ff88;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
        }

        .price-original {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.6);
            text-decoration: line-through;
            margin-left: 10px;
        }

        .product-rating {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
        }

        .stars {
            display: flex;
            gap: 2px;
        }

        .star {
            color: #ffd700;
            font-size: 16px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .rating-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
        }

        .product-description {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        /* Size Selection */
        .size-section {
            margin-bottom: 25px;
        }

        .size-label {
            color: white;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .size-options {
            display: flex;
            gap: 10px;
        }

        .size-option {
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .size-option.active {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.6);
            transform: scale(1.1);
        }

        .size-option:hover:not(.active) {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        /* Stock Info */
        .stock-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stock-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00ff88;
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .stock-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            font-weight: 500;
        }

        /* Add to Cart Button */
        .add-to-cart-btn {
            width: 100%;
            padding: 18px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .add-to-cart-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }

        .add-to-cart-btn:hover::before {
            left: 100%;
        }

        .add-to-cart-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .add-to-cart-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Loading and Error States */
        .loading, .error {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 600;
            z-index: 1000;
        }

        .loading {
            background: rgba(0, 0, 0, 0.8);
            color: white;
        }

        .error {
            background: rgba(231, 76, 60, 0.9);
            color: white;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .product-display {
                grid-template-columns: 1fr;
                gap: 30px;
                padding: 20px;
            }

            .details-panel {
                padding: 30px 20px;
            }

            .product-title {
                font-size: 24px;
            }

            .product-price {
                font-size: 22px;
            }

            .color-thumbnails {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Loading State -->
    <div id="loading" class="loading">
        ✨ Loading glass experience...
    </div>
    
    <!-- Error State -->
    <div id="error" class="error" style="display: none;">
        ⚠️ Product not found
    </div>

    <!-- Main Product Container -->
    <div id="product-container" class="product-container" style="display: none;">
        <!-- Background Image -->
        <img id="background-image" class="background-image" src="/placeholder.svg" alt="Background">
        
        <!-- Glass Overlay -->
        <div class="glass-overlay"></div>
        
        <!-- Product Display -->
        <div class="product-display">
            <!-- Product Image Section -->
            <div class="product-image-section">
                <img id="main-image" class="main-product-image" src="/placeholder.svg" alt="Product">
                <div id="color-thumbnails" class="color-thumbnails"></div>
            </div>

            <!-- Glass Details Panel -->
            <div class="details-panel">
                <div id="product-category" class="product-category"></div>
                <h1 id="product-title" class="product-title"></h1>
                
                <div class="price-section">
                    <span id="current-price" class="product-price"></span>
                    <span id="original-price" class="price-original" style="display: none;"></span>
                </div>

                <div class="product-rating">
                    <div class="stars">
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">☆</span>
                    </div>
                    <span class="rating-text">4.5 (128 reviews)</span>
                </div>

                <p id="product-description" class="product-description"></p>

                <div class="size-section">
                    <div class="size-label">Size</div>
                    <div class="size-options">
                        <div class="size-option">XS</div>
                        <div class="size-option">S</div>
                        <div class="size-option active">M</div>
                        <div class="size-option">L</div>
                        <div class="size-option">XL</div>
                    </div>
                </div>

                <div id="stock-info" class="stock-info">
                    <div class="stock-dot"></div>
                    <span id="stock-text" class="stock-text"></span>
                </div>

                <button id="add-to-cart-btn" class="add-to-cart-btn" onclick="addToCart()">
                    Add to Cart
                </button>
            </div>
        </div>
    </div>

    <script>
        function getProductId() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('id') || '1';
        }

        function formatPrice(price) {
            return new Intl.NumberFormat('en-CA', {
                style: 'currency',
                currency: 'CAD'
            }).format(price);
        }

        function setStockInfo(stock) {
            const stockInfo = document.getElementById('stock-info');
            const stockText = document.getElementById('stock-text');
            const stockDot = document.querySelector('.stock-dot');
            const addToCartBtn = document.getElementById('add-to-cart-btn');
            
            if (stock > 20) {
                stockDot.style.background = '#00ff88';
                stockDot.style.boxShadow = '0 0 10px rgba(0, 255, 136, 0.5)';
                stockText.textContent = `✅ In Stock (${stock} available)`;
                addToCartBtn.disabled = false;
            } else if (stock > 0) {
                stockDot.style.background = '#ffc107';
                stockDot.style.boxShadow = '0 0 10px rgba(255, 193, 7, 0.5)';
                stockText.textContent = `⚡ Low Stock (${stock} left)`;
                addToCartBtn.disabled = false;
            } else {
                stockDot.style.background = '#ff6b6b';
                stockDot.style.boxShadow = '0 0 10px rgba(255, 107, 107, 0.5)';
                stockText.textContent = '❌ Out of Stock';
                addToCartBtn.disabled = true;
                addToCartBtn.textContent = 'Out of Stock';
            }
        }

        function setupImageGallery(images) {
            const mainImage = document.getElementById('main-image');
            const backgroundImage = document.getElementById('background-image');
            const colorThumbnails = document.getElementById('color-thumbnails');
            
            if (images && images.length > 0) {
                mainImage.src = images[0];
                backgroundImage.src = images[0];
                
                images.forEach((image, index) => {
                    const thumb = document.createElement('img');
                    thumb.src = image;
                    thumb.className = `color-thumb ${index === 0 ? 'active' : ''}`;
                    thumb.alt = `Color variation ${index + 1}`;
                    
                    thumb.addEventListener('click', () => {
                        // Smooth transition effect
                        mainImage.style.opacity = '0.7';
                        backgroundImage.style.opacity = '0.7';
                        
                        setTimeout(() => {
                            mainImage.src = image;
                            backgroundImage.src = image;
                            mainImage.style.opacity = '1';
                            backgroundImage.style.opacity = '1';
                        }, 200);
                        
                        // Update active state
                        document.querySelectorAll('.color-thumb').forEach(t => t.classList.remove('active'));
                        thumb.classList.add('active');
                    });
                    
                    colorThumbnails.appendChild(thumb);
                });
            }
        }

        function setupSizeOptions() {
            const sizeOptions = document.querySelectorAll('.size-option');
            sizeOptions.forEach(option => {
                option.addEventListener('click', () => {
                    sizeOptions.forEach(s => s.classList.remove('active'));
                    option.classList.add('active');
                });
            });
        }

        async function loadProduct() {
            try {
                const productId = getProductId();
                const response = await fetch('../data/products-data.json');
                
                if (!response.ok) throw new Error('Failed to fetch');
                
                const products = await response.json();
                const product = products.find(p => p.id.toString() === productId);
                
                if (!product) throw new Error('Product not found');

                document.getElementById('loading').style.display = 'none';
                document.getElementById('product-container').style.display = 'flex';

                document.getElementById('product-category').textContent = product.label;
                document.getElementById('product-title').textContent = product.name;
                document.getElementById('product-description').textContent = product.description.join(' ');

                const currentPrice = product.price - product.discount;
                document.getElementById('current-price').textContent = formatPrice(currentPrice);
                
                if (product.discount > 0) {
                    document.getElementById('original-price').textContent = formatPrice(product.price);
                    document.getElementById('original-price').style.display = 'inline';
                }

                setStockInfo(product.stock);
                setupImageGallery(product.images);
                setupSizeOptions();

                document.title = `${product.name} - Glass Design`;

            } catch (error) {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error').style.display = 'flex';
            }
        }

        function addToCart() {
            const productId = getProductId();
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ id: productId, quantity: 1 });
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            
            // Visual feedback
            const btn = document.getElementById('add-to-cart-btn');
            const originalText = btn.textContent;
            btn.textContent = '✅ Added to Cart!';
            btn.style.background = 'rgba(0, 255, 136, 0.3)';
            
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = 'rgba(255, 255, 255, 0.2)';
            }, 2000);
        }

        document.addEventListener('DOMContentLoaded', loadProduct);
    </script>
</body>
</html>